
<!DOCTYPE html>
<html>
  <head>
    <title>Gno: Examples and Comparisons</title>
    <meta charset='utf-8'>
    <script>
      var notesEnabled =  false ;
    </script>
    <script src='../../static/slides.js'></script>

    

    <script>
      
      if (window["location"] && window["location"]["hostname"] == "talks.golang.org") {
        var _gaq = _gaq || [];
        _gaq.push(["_setAccount", "UA-11222381-6"]);
        _gaq.push(["b._setAccount", "UA-49880327-6"]);
        window.trackPageview = function() {
          _gaq.push(["_trackPageview", location.pathname+location.hash]);
          _gaq.push(["b._trackPageview", location.pathname+location.hash]);
        };
        window.trackPageview();
        window.trackEvent = function(category, action, opt_label, opt_value, opt_noninteraction) {
          _gaq.push(["_trackEvent", category, action, opt_label, opt_value, opt_noninteraction]);
          _gaq.push(["b._trackEvent", category, action, opt_label, opt_value, opt_noninteraction]);
        };
      }
    </script>
  </head>

  <body style='display: none'>

    <section class='slides layout-widescreen'>

      <article>
        <h1>Gno: Examples and Comparisons</h1>
        <h3>Nebular, 13 Jul 2024, Brussels</h3>
        
        
          <div class="presenter">
            
  
  <p>
    Manfred Touron  
  </p>
  

  
  <p>
    VP Eng., Gno.land  
  </p>
  

          </div>
        
      </article>

  
  
      <article >
      
        <h3>Bonjour, Nebular!</h3>
        
  <div class="code" >
<pre><span num="1">package main</span>
<span num="2"></span>
<span num="3">import &#34;fmt&#34;</span>
<span num="4"></span>
<span num="5">func main() {</span>
<span num="6">    fmt.Println(&#34;Hello, Nebular! It&#39;s Manfred.&#34;)</span>
<span num="7">}</span>
</pre>
</div>

      
      <span class="pagenumber">2</span>
      </article>
  
  
  
      <article >
      
        <h3>What is Gno?</h3>
        <ul>
<li><strong>Gno</strong>: Deterministic, transactional, auto-persistent Go interpreter.</li>
<li><strong>Gno.land</strong>: Upcoming blockchain using Gno for smart contracts.</li>
<li><strong>Key Features</strong>:
<ul>
<li>Proof of Contribution</li>
<li>Tendermint2, IBCx, ICSx</li>
<li>Hub of the Gno ecosystem</li>
<li>Future AtomOne Hub ICS consumer</li>
</ul>
</li>
</ul>

      
      <span class="pagenumber">3</span>
      </article>
  
  
  
      <article >
      
        <h3>Gno - Features and Limitations</h3>
        <ul>
<li><strong>Determinism</strong>: Guaranteed</li>
<li><strong>Generics</strong>: Not supported (yet)</li>
<li><strong>State Persistence</strong>: Built-in</li>
<li><strong>Sandboxed Execution</strong>: Safe and secure</li>
<li><strong>More Info</strong>: https://docs.gno.land/reference/go-gno-compatibility</li>
</ul>

      
      <span class="pagenumber">4</span>
      </article>
  
  
  
      <article >
      
        <h3>gno hello world</h3>
        
  <div class="code" >
<pre><span num="1">package hello</span>
<span num="2"></span>
<span num="3">func Hello() string {</span>
<span num="4">    return &#34;hello world&#34;</span>
<span num="5">}</span>
</pre>
</div>

      
      <span class="pagenumber">5</span>
      </article>
  
  
  
      <article >
      
        <h3>counter.gno - persistency and Render()</h3>
        
  <div class="code" >
<pre><span num="1">package counter</span>
<span num="2"></span>
<span num="3">var Counter int</span>
<span num="4"></span>
<span num="5">func Inc() {</span>
<span num="6">    Counter &#43;= 1</span>
<span num="7">}</span>
<span num="8"></span>
<span num="9">func Render(path string) string {</span>
<span num="10">    return &#34;My Super Counter: &#34; &#43; Counter</span>
<span num="11">}</span>
</pre>
</div>

      
      <span class="pagenumber">6</span>
      </article>
  
  
  
      <article >
      
        <h3>counter.gno - private helpers</h3>
        
  <div class="code" >
<pre><span num="1">package counter</span>
<span num="2"></span>
<span num="3">import &#34;std&#34;</span>
<span num="4"></span>
<span num="5">var (</span>
<span num="6">    Counter    int</span>
<span num="7">    LastCaller std.Address</span>
<span num="8">)</span>
<span num="9"></span>
<span num="10">func Inc() int {</span>
<span num="11">    return addToCounter(amount)</span>
<span num="12">}</span>
<span num="13"></span>
<span num="14">func Add(amount int) int {</span>
<span num="15">    return addToCounter(amount)</span>
<span num="16">}</span>
<span num="17"></span>
<span num="18">func addToCounter(amount int) int {</span>
<span num="19">    Counter &#43;= amount</span>
<span num="20">    LastCaller = std.GetOrigCaller()</span>
<span num="21">    return Counter</span>
<span num="22">}</span>
</pre>
</div>

      
      <span class="pagenumber">7</span>
      </article>
  
  
  
      <article >
      
        <h3>gno guest book</h3>
        
  <div class="code" >
<pre><span num="1">package guest</span>
<span num="2"></span>
<span num="3">import &#34;std&#34;</span>
<span num="4"></span>
<span num="5">var messages avl.Tree // std.Address -&gt; string (message)</span>
<span num="6"></span>
<span num="7">func AddMessage(message string) {</span>
<span num="8">    caller := std.GetOrigCaller()</span>
<span num="9">    if _, ok := messages.Get(caller); ok {</span>
<span num="10">        panic(&#34;this user already post a message&#34;)</span>
<span num="11">    }</span>
<span num="12">    messages.Set(caller, message) // add message to our messages list</span>
<span num="13">}</span>
<span num="14"></span>
<span num="15">func Render(path string) string {</span>
<span num="16">    var view string</span>
<span num="17">    for _, message := range messages {</span>
<span num="18">        view = view &#43; &#34;\n&#34; &#43; message // add message to the render</span>
<span num="19">    }</span>
<span num="20">    return view</span>
<span num="21">}</span>
</pre>
</div>

      
      <span class="pagenumber">8</span>
      </article>
  
  
  
      <article >
      
        <h3>import &#34;std&#34;</h3>
        
  <div class="code" >
<pre><span num="1">package std // import &#34;std&#34;</span>
<span num="2"></span>
<span num="3">func AssertOriginCall()</span>
<span num="4">func Emit(typ string, attrs ...string)</span>
<span num="5">func GetChainID() string</span>
<span num="6">func GetHeight() int64</span>
<span num="7">func IsOriginCall() bool</span>
<span num="8">type Address string</span>
<span num="9">    func DerivePkgAddr(pkgPath string) Address</span>
<span num="10">    func GetOrigCaller() Address</span>
<span num="11">type Banker interface{ ... }</span>
<span num="12">    func GetBanker(bt BankerType) Banker</span>
<span num="13">type Coin struct{ ... }</span>
<span num="14">    func NewCoin(denom string, amount int64) Coin</span>
<span num="15">type Coins []Coin</span>
<span num="16">    func GetOrigSend() Coins</span>
<span num="17">    func NewCoins(coins ...Coin) Coins</span>
<span num="18">type Realm struct{ ... }</span>
<span num="19">    func CurrentRealm() Realm</span>
<span num="20">    func PrevRealm() Realm</span>
</pre>
</div>

      
      <span class="pagenumber">9</span>
      </article>
  
  
  
      <article >
      
        <h3>Why Gno?</h3>
        <p>The <strong>GnoVM</strong> enables</p>
<p><strong>seamless interoperability</strong> of</p>
<p><strong>untrusted</strong> user programs</p>
<p>written in a good language.</p>

      
      <span class="pagenumber">10</span>
      </article>
  
  
  
      <article >
      
        <h3>alice.gno, bob.gno</h3>
        
  <div class="code" >
<pre><span num="1">package alice</span>
<span num="2"></span>
<span num="3">var x int</span>
<span num="4"></span>
<span num="5">func GetX() int {</span>
<span num="6">    return x</span>
<span num="7">}</span>
<span num="8"></span>
<span num="9">func SetX(n int) {</span>
<span num="10">    x = n</span>
<span num="11">}</span>
</pre>
</div>

  <div class="code" >
<pre><span num="1">package bob</span>
<span num="2"></span>
<span num="3">import &#34;alice&#34;</span>
<span num="4"></span>
<span num="5">func IncrAlice() {</span>
<span num="6">    x := alice.GetX()</span>
<span num="7">    alice.SetX(x &#43; 1)</span>
<span num="8">}</span>
</pre>
</div>

      
      <span class="pagenumber">11</span>
      </article>
  
  
  
      <article >
      
        <h3>users.gno - register</h3>
        
  <div class="code" >
<pre><span num="1">package users</span>
<span num="2"></span>
<span num="3">var (</span>
<span num="4">    addressToUsers avl.Tree // address -&gt; user</span>
<span num="5">    usersToAddress avl.Tree // user -&gt; address</span>
<span num="6">)</span>
<span num="7"></span>
<span num="8">func Register(name string) {</span>
<span num="9">    caller := std.GetOrigCaller()</span>
<span num="10">    if usersToAddress.Has(name) || addressToUsers.Has(caller) {</span>
<span num="11">        panic(&#34;address/name already registered&#34;)</span>
<span num="12">    }</span>
<span num="13"></span>
<span num="14">    usersToAddress.Set(name, std.GetOrignCaller())</span>
<span num="15">    addressToUsers.Set(std.GetOrignCaller(), name)</span>
<span num="16">}</span>
</pre>
</div>

      
      <span class="pagenumber">12</span>
      </article>
  
  
  
      <article >
      
        <h3>users.gno - admin invite</h3>
        
  <div class="code" >
<pre><span num="1">package users</span>
<span num="2"></span>
<span num="3">var admin = &#34;g1xxxxx...&#34;</span>
<span num="4"></span>
<span num="5">var invites avl.Tree // std.Address -&gt; true</span>
<span num="6"></span>
<span num="7">func AdminSendInvite(address std.Address) {</span>
<span num="8">    if caller := std.GetOrigCaller(); caller != admin {</span>
<span num="9">        panic(&#34;unauthorized&#34;)</span>
<span num="10">    }</span>
<span num="11">    invites.Set(address, true)</span>
<span num="12">}</span>
<span num="13"></span>
<span num="14">func Register() {</span>
<span num="15">    caller := std.GetOrigCaller()</span>
<span num="16">    if !invites.Has(caller) {</span>
<span num="17">        panic(&#34;caller hasn&#39;t been invited&#34;)</span>
<span num="18">    }</span>
<span num="19">    // ... register caller</span>
<span num="20">    invites.Remove(address)</span>
<span num="21">}</span>
</pre>
</div>

      
      <span class="pagenumber">13</span>
      </article>
  
  
  
      <article >
      
        <h3>tamagotchi.gno - struct</h3>
        
  <div class="code" >
<pre><span num="1">package tamagochi</span>
<span num="2"></span>
<span num="3">// Tamagotchi structure</span>
<span num="4">type Tamagotchi struct {</span>
<span num="5">    hunger    int</span>
<span num="6">    happiness int</span>
<span num="7">    health    int</span>
<span num="8">}</span>
<span num="9"></span>
<span num="10">func (t *Tamagotchi) Feed() {</span>
<span num="11">    t.updateStats()</span>
<span num="12">    if t.dead() {</span>
<span num="13">        return</span>
<span num="14">    }</span>
<span num="15">    t.hunger = bound(t.hunger-10, 0, 100)</span>
<span num="16">}</span>
<span num="17"></span>
<span num="18">func (t *Tamagotchi) Heal() { /* ...  */ }</span>
<span num="19"></span>
<span num="20">func (t *Tamagotchi) Play() { /* ...  */ }</span>
</pre>
</div>

      
      <span class="pagenumber">14</span>
      </article>
  
  
  
      <article >
      
        <h3>tamagotchi.gno - render</h3>
        
  <div class="code" >
<pre><span num="1">package tamagochi</span>
<span num="2"></span>
<span num="3">var tam Tamagochi</span>
<span num="4"></span>
<span num="5">// Interaction function ...</span>
<span num="6"></span>
<span num="7">func Render(path string) string {</span>
<span num="8">    switch {</span>
<span num="9">    case tam.Health() == 0:</span>
<span num="10">        return &#34;ðŸ˜µ&#34; // dead face</span>
<span num="11">    case tam.Health() &lt; 30:</span>
<span num="12">        return &#34;ðŸ˜·&#34; // sick face</span>
<span num="13">    case tam.Happiness() &lt; 30:</span>
<span num="14">        return &#34;ðŸ˜¢&#34; // sad face</span>
<span num="15">    case tam.Hunger() &gt; 70:</span>
<span num="16">        return &#34;ðŸ˜«&#34; // hungry face</span>
<span num="17">    default:</span>
<span num="18">        return &#34;ðŸ˜ƒ&#34; // happy face</span>
<span num="19">    }</span>
<span num="20">}</span>
</pre>
</div>

      
      <span class="pagenumber">15</span>
      </article>
  
  
  
      <article >
      
        <h3>grc20/types.gno</h3>
        <p>Implement a GRC20 token standard similar to ERC20 in Solidity.</p>

  <div class="code" >
<pre><span num="1">// gno.land/p/demo/grc/grc20</span>
<span num="2">package grc20</span>
<span num="3"></span>
<span num="4">import (</span>
<span num="5">    &#34;std&#34;</span>
<span num="6"></span>
<span num="7">    &#34;gno.land/p/demo/grc/exts&#34;</span>
<span num="8">)</span>
<span num="9"></span>
<span num="10">type GRC20 interface {</span>
<span num="11">    exts.TokenMetadata</span>
<span num="12">    TotalSupply() uint64</span>
<span num="13">    BalanceOf(account std.Address) uint64</span>
<span num="14">    Transfer(to std.Address, amount uint64) error</span>
<span num="15">    Allowance(owner, spender std.Address) uint64</span>
<span num="16">    Approve(spender std.Address, amount uint64) error</span>
<span num="17">    TransferFrom(from, to std.Address, amount uint64) error</span>
<span num="18">}</span>
</pre>
</div>

      
      <span class="pagenumber">16</span>
      </article>
  
  
  
      <article >
      
        <h3>bar20.gno</h3>
        
  <div class="code" >
<pre><span num="1">package bar20</span>
<span num="2"></span>
<span num="3">import &#34;gno.land/r/demo/grc20reg&#34;</span>
<span num="4"></span>
<span num="5">var Bank, adm = grc20.NewBank(&#34;Bar&#34;, &#34;BAR&#34;, 4)</span>
<span num="6"></span>
<span num="7">var UserBanker = grc20.PrevRealmBanker(Bank)</span>
<span num="8"></span>
<span num="9">func init() {</span>
<span num="10">    grc20reg.Register(Bank, &#34;&#34;)</span>
<span num="11">}</span>
<span num="12"></span>
<span num="13">func Faucet() string {</span>
<span num="14">    caller := std.GetOrignCaller()</span>
<span num="15">    if err := adm.Mint(caller, 1_000_000); err != nil {</span>
<span num="16">        return &#34;error: &#34; &#43; err.Error()</span>
<span num="17">    }</span>
<span num="18">    return &#34;OK&#34;</span>
<span num="19">}</span>
</pre>
</div>

      
      <span class="pagenumber">17</span>
      </article>
  
  
  
      <article >
      
        <h3>grc20registry</h3>
        
  <div class="code" >
<pre><span num="1">package grc20reg</span>
<span num="2"></span>
<span num="3">import (</span>
<span num="4">    &#34;std&#34;</span>
<span num="5"></span>
<span num="6">    &#34;gno.land/p/demo/grc/grc20&#34;</span>
<span num="7">)</span>
<span num="8"></span>
<span num="9">var registry = avl.NewTree() // rlmPath[.slug] -&gt; *grc20.Bank</span>
<span num="10"></span>
<span num="11">func Register(bank *grc20.Bank, slug string) {</span>
<span num="12">    rlmPath := std.PrevRealm().PkgPath()</span>
<span num="13">    key := fqname.Construct(rlmPath, slug)</span>
<span num="14">    registry.Set(key, bank)</span>
<span num="15">    std.Emit(registerEvent, &#34;pkgpath&#34;, rlmPath, &#34;slug&#34;, slug)</span>
<span num="16">}</span>
<span num="17"></span>
<span num="18">func Get(key string) *grc20.Bank {</span>
<span num="19">    bank, ok := registry.Get(key)</span>
<span num="20">    if !ok {</span>
<span num="21">        return nil</span>
<span num="22">    }</span>
<span num="23">    return bank.(*grc20.Bank)</span>
<span num="24">}</span>
</pre>
</div>

      
      <span class="pagenumber">18</span>
      </article>
  
  
  
      <article >
      
        <h3>wugnot.gno</h3>
        
  <div class="code" >
<pre><span num="1">package wugnot</span>
<span num="2"></span>
<span num="3">import (</span>
<span num="4">    &#34;std&#34;</span>
<span num="5">    &#34;strings&#34;</span>
<span num="6"></span>
<span num="7">    &#34;gno.land/p/demo/grc/grc20&#34;</span>
<span num="8">    &#34;gno.land/p/demo/ufmt&#34;</span>
<span num="9">    pusers &#34;gno.land/p/demo/users&#34;</span>
<span num="10">    &#34;gno.land/r/demo/grc20reg&#34;</span>
<span num="11">    &#34;gno.land/r/demo/users&#34;</span>
<span num="12">)</span>
<span num="13"></span>
<span num="14">var Bank, adm = grc20.NewBank(&#34;wrapped GNOT&#34;, &#34;wugnot&#34;, 0)</span>
<span num="15"></span>
<span num="16">func Deposit() {</span>
<span num="17">    caller := std.PrevRealm().Addr()</span>
<span num="18">    sent := std.GetOrigSend()</span>
<span num="19">    amount := sent.AmountOf(&#34;ugnot&#34;)</span>
<span num="20">    require(uint64(amount) &gt;= ugnotMinDeposit, ufmt.Sprintf(&#34;Deposit below minimum: %d/%d ugnot.&#34;, amount, ugnotMinDeposit))</span>
<span num="21">    checkErr(adm.Mint(caller, uint64(amount)))</span>
<span num="22">}</span>
<span num="23"></span>
<span num="24">// Withdraw...</span>
</pre>
</div>

      
      <span class="pagenumber">19</span>
      </article>
  
  
  
      <article >
      
        <h3>grc20factory.gno</h3>
        
  <div class="code" >
<pre><span num="1">package foo20</span>
<span num="2"></span>
<span num="3">import (</span>
<span num="4">    &#34;std&#34;</span>
<span num="5">    &#34;strings&#34;</span>
<span num="6"></span>
<span num="7">    &#34;gno.land/p/demo/grc/grc20&#34;</span>
<span num="8">    &#34;gno.land/r/demo/grc20reg&#34;</span>
<span num="9">)</span>
<span num="10"></span>
<span num="11">var instances avl.Tree // symbol -&gt; instance</span>
<span num="12"></span>
<span num="13">func New(name, symbol string, decimals uint, initialMint, faucet uint64) {</span>
<span num="14">    admin := std.PrevRealm().Addr()</span>
<span num="15">    bank := grc20.NewBank(name, symbol, decimals)</span>
<span num="16">    bank.Mint(admin, initialMint)</span>
<span num="17">    inst := instance{bank: bank, admin: ownable.NewWithAddress(admin), faucet: faucet}</span>
<span num="18">    instances.Set(symbol, &amp;inst)</span>
<span num="19">    grc20reg.Register(bank, symbol)</span>
<span num="20">}</span>
<span num="21"></span>
<span num="22">func Bank(symbol string) *grc20.Bank {</span>
<span num="23">    return mustGetInstance(symbol).bank</span>
<span num="24">}</span>
</pre>
</div>

      
      <span class="pagenumber">20</span>
      </article>
  
  
  
      <article >
      
        <h3>minidex - PlaceOrder</h3>
        
  <div class="code" >
<pre><span num="1">package dex</span>
<span num="2"></span>
<span num="3">func (dex *DEX) PlaceOrder(tokenFrom, tokenTo *grc20.Bank, amount uint64, isBuy bool) int {</span>
<span num="4">    trader, contract := std.PrevRealm().Addr(), std.CurrentRealm().Addr()</span>
<span num="5">    userBanker := grc20.AccountBanker(tokenFrom, &#34;&#34;)</span>
<span num="6"></span>
<span num="7">    allowance := userBanker.Allowance(trader, contract)</span>
<span num="8">    require(allowance &gt;= amount, &#34;insufficient allowance&#34;)</span>
<span num="9">    err := userBanker.TransferFrom(trader, contract, amount)</span>
<span num="10">    checkErr(err, &#34;cannot retrieve tokens from allowance&#34;)</span>
<span num="11"></span>
<span num="12">    order := &amp;Order{trader: trader, tokenFrom: tokenFrom, tokenTo: tokenTo, amount: amount, isBuy: isBuy}</span>
<span num="13">    dex.Append(order)</span>
<span num="14">    std.Emit(</span>
<span num="15">        &#34;order_placed&#34;,</span>
<span num="16">        &#34;trader&#34;, trader.String(),</span>
<span num="17">        &#34;tokenFrom&#34;, tokenFrom.GetName(),</span>
<span num="18">        &#34;tokenTo&#34;, tokenTo.GetName(),</span>
<span num="19">        &#34;amount&#34;, ufmt.Sprintf(&#34;%d&#34;, amount),</span>
<span num="20">    )</span>
<span num="21"></span>
<span num="22">    return dex.matchPairOrders(tokenFrom, tokenTo)</span>
<span num="23">}</span>
</pre>
</div>

      
      <span class="pagenumber">21</span>
      </article>
  
  
  
      <article >
      
        <h3>minidex - MatchOrders</h3>
        
  <div class="code" >
<pre><span num="1">package dex</span>
<span num="2"></span>
<span num="3">func (dex *DEX) matchPairOrders(tokenFrom, tokenTo *grc20.Bank) int {</span>
<span num="4">    matched := 0</span>
<span num="5">    orders.Iterate(&#34;&#34;, &#34;&#34;, func(key1 string, value interface{}) bool {</span>
<span num="6">        orders.Iterate(&#34;&#34;, &#34;&#34;, func(key2 string, value2 interface{}) bool {</span>
<span num="7">            if order1.isBuy != order2.isBuy &amp;&amp; order1.tokenFrom == order2.tokenTo &amp;&amp; order1.tokenTo == order2.tokenFrom {</span>
<span num="8">                amount := min(order1.amount, order2.amount)</span>
<span num="9">                order1.amount -= amount</span>
<span num="10">                order2.amount -= amount</span>
<span num="11">                banker1 := grc20.AccountBanker(order1.tokenFrom, &#34;&#34;)</span>
<span num="12">                banker2 := grc20.AccountBanker(order2.tokenFrom, &#34;&#34;)</span>
<span num="13">                banker1.Transfer(order2.trader, amount)</span>
<span num="14">                banker2.Transfer(order1.trader, amount)</span>
<span num="15">                matched&#43;&#43;</span>
<span num="16">                std.Emit(&#34;trade_executed&#34; /*...*/)</span>
<span num="17">            }</span>
<span num="18">        })</span>
<span num="19">    })</span>
<span num="20">    return matched</span>
<span num="21">}</span>
</pre>
</div>

      
      <span class="pagenumber">22</span>
      </article>
  
  
  
      <article >
      
        <h3>dao.gno</h3>
        
  <div class="code" >
<pre><span num="1">package dao</span>
<span num="2"></span>
<span num="3">// Voter defines the needed methods for a voting system</span>
<span num="4">type Voter interface {</span>
<span num="5">    // IsAccepted indicates if the voting process had been accepted</span>
<span num="6">    IsAccepted(voters []std.Address) bool</span>
<span num="7"></span>
<span num="8">    // IsFinished indicates if the voting process is finished</span>
<span num="9">    IsFinished(voters []std.Address) bool</span>
<span num="10"></span>
<span num="11">    // Vote adds a new vote to the voting system</span>
<span num="12">    Vote(voters []std.Address, caller std.Address, flag string)</span>
<span num="13"></span>
<span num="14">    // Status returns a human friendly string describing how the voting process is going</span>
<span num="15">    Status(voters []std.Address) string</span>
<span num="16">}</span>
</pre>
</div>

      
      <span class="pagenumber">23</span>
      </article>
  
  
  
      <article >
      
        <h3>Boards Post</h3>
        
  <div class="code" >
<pre><span num="1">package board</span>
<span num="2"></span>
<span num="3">type Post struct {</span>
<span num="4">    id       int</span>
<span num="5">    Author   std.Address</span>
<span num="6">    Name     string</span>
<span num="7">    Comments []Post</span>
<span num="8">}</span>
<span num="9"></span>
<span num="10">type Board struct {</span>
<span num="11">    posts []Post</span>
<span num="12">}</span>
<span num="13"></span>
<span num="14">func (b *Board) Post(name, body string) Post {</span>
<span num="15">    caller := std.GetOrigCaller()</span>
<span num="16">    post := Post{len(b.posts), caller, name, body}</span>
<span num="17">    b.posts = append(b.posts, post)</span>
<span num="18">    return post</span>
<span num="19">}</span>
</pre>
</div>

      
      <span class="pagenumber">24</span>
      </article>
  
  
  
      <article >
      
        <h3>Board - comment</h3>
        
  <div class="code" >
<pre><span num="1">package board</span>
<span num="2"></span>
<span num="3">type Post struct{}</span>
<span num="4"></span>
<span num="5">type Board struct{}</span>
<span num="6"></span>
<span num="7">func (b *Board) Post(name, body string) Post</span>
<span num="8"></span>
<span num="9">func (b *Board) Comment(id string, body string) {</span>
<span num="10">    if id &lt; 0 || id &gt;= len(b.posts) {</span>
<span num="11">        panic(&#34;invalid id&#34;)</span>
<span num="12">    }</span>
<span num="13">    caller := std.GetOrigCaller()</span>
<span num="14"></span>
<span num="15">    post := &amp;b.posts[id]</span>
<span num="16">    comment := Post{len(post.Comment), caller, &#34;&#34;, body}</span>
<span num="17">    post.Comment = append(post.Comment, post)</span>
<span num="18">}</span>
</pre>
</div>

      
      <span class="pagenumber">25</span>
      </article>
  
  
  
      <article >
      
        <h3>Blog - Post</h3>
        
  <div class="code" >
<pre><span num="1">package blog</span>
<span num="2"></span>
<span num="3">import &#34;time&#34;</span>
<span num="4"></span>
<span num="5">type Post struct {</span>
<span num="6">    id       int</span>
<span num="7">    Date     time.Time</span>
<span num="8">    Name     string</span>
<span num="9">    Comments []Post</span>
<span num="10">}</span>
<span num="11"></span>
<span num="12">var postid int</span>
<span num="13"></span>
<span num="14">var posts []Post</span>
<span num="15"></span>
<span num="16">func Post(name, body string) Post {</span>
<span num="17">    post := Post{postid, time.Now(), name, body}</span>
<span num="18">    posts = append(posts, post)</span>
<span num="19">    postid&#43;&#43;</span>
<span num="20">    return post</span>
<span num="21">}</span>
</pre>
</div>

      
      <span class="pagenumber">26</span>
      </article>
  
  
  
      <article >
      
        <h3>Blog - Admin</h3>
        
  <div class="code" >
<pre><span num="1">package blog</span>
<span num="2"></span>
<span num="3">type Post struct{}</span>
<span num="4"></span>
<span num="5">var (</span>
<span num="6">    adminAuthor string = std.GetOrginCaller() // Set deployer as admin</span>
<span num="7">    postid      int</span>
<span num="8">    posts       []Post</span>
<span num="9">)</span>
<span num="10"></span>
<span num="11">func Post(name, body string) Post {</span>
<span num="12">    // Assert caller is admin</span>
<span num="13">    caller := std.GetOrigCaller()</span>
<span num="14">    if caller != adminAuthor {</span>
<span num="15">        panic(&#34;unauthorized&#34;)</span>
<span num="16">    }</span>
<span num="17"></span>
<span num="18">    // Add post ...</span>
<span num="19">}</span>
</pre>
</div>

      
      <span class="pagenumber">27</span>
      </article>
  
  

      <article>
        <h3>Thank you</h3>
        
          <div class="presenter">
            
  
  <p>
    Manfred Touron  
  </p>
  

  
  <p>
    VP Eng., Gno.land  
  </p>
  
<p class="link"><a href="https://gno.land/%20%20" target="_blank">https://gno.land/  </a></p><p class="link"><a href="https://github.com/gnolang%20%20" target="_blank">https://github.com/gnolang  </a></p><p class="link"><a href="http://twitter.com/moul%20%20" target="_blank">@moul  </a></p>
          </div>
        
      </article>

    </section>

    <div id="help">
      Use the left and right arrow keys or click the left and right
      edges of the page to navigate between slides.<br>
      (Press 'H' or navigate to hide this message.)
    </div>

    

    <script>
      (function() {
        
        if (window["location"] && window["location"]["hostname"] == "talks.golang.org") {
          var ga = document.createElement("script"); ga.type = "text/javascript"; ga.async = true;
          ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";
          var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ga, s);
        }
      })();
    </script>
  </body>
</html>
